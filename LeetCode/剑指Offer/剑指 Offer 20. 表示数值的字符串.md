### [剑指 Offer 20. 表示数值的字符串](https://leetcode-cn.com/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof/)
### 题目
请实现一个函数用来判断字符串是否表示数值（包括整数和小数）。例如，字符串"+100"、"5e2"、"-123"、"3.1416"、"-1E-16"、"0123"都表示数值，但"12e"、"1a3.14"、"1.2.3"、"+-5"及"12e+5.4"都不是。

### 思路

使用有限状态自动机，判断字符串是否符合某一模式。
1. 按照字符串从左到右的顺序，定义以下9种状态
	1. 开始时的空格
	2. 底数的符号
	3. 底数的整数部分
	4. 底数的小数点
	5. 底数的小数部分
	6. 幂符号 
    7. 指数的符号
    8. 指数的数字
    9. 末尾空格
    10. 底数的小数点（左侧无整数）
2. 确定结束状态。合法的结束状态为3，4，5，8，9。
3. 画出状态转移图
    ![状态转移图](Pict/202103291715_剑指Offer20.svg)
4. 根据状态转移表，对字符串进行判断。如果能够到达合法的结束状态，说明字符串可以表示数值
    1. 使用数值对各个状态进行编码


### AC代码

```python
class Solution:
    def isNumber(self,s:str) ->bool:
        states=[
            {},
            {'b':1, 'p':10, 'd':3,'s':2},   #1 起始位的空格
            {'d':3, 'p':10},                #2 符号位
            {'d':3, 'b':9, 'e':6,'p':4},    #3 底数的整数部分
            {'b':9, 'e':6, 'd':5},          #4 底数的小数点
            {'d':5, 'e':6, 'b':9},          #5 底数的小数部分
            {'d':8, 's':7},                 #6 幂E/e
            {'d':8},                        #7 指数符号
            {'d':8,'b':9},                  #8 指数数字
            {'b':9},                        #9 末尾空格
            {'d':5}                         #10 底数的小数点（左侧无整数）
        ]
        # 'b'--blank, 'd'--digit, 'p'--point, 's'--sign
        state=1
        t=' '
        for c in s:
            if '0' <= c <= '9': t='d'
            elif c in "+-": t='s'
            elif c in "eE": t='e'
            elif c == ' ': t='b'
            elif c ==  '.': t='p'
            else: t='?'
            print(states[state].keys())
            if t not in states[state].keys():
                return False
            state=states[state][t]
        return state in (3,4,5,8,9)
```
